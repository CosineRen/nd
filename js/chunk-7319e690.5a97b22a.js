(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7319e690"],{"0ea3":function(t,e,a){},1205:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"生成记录"}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-radio-group",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("a-radio-button",{attrs:{value:"all"}},[t._v("全部")]),a("a-radio-button",{attrs:{value:"processing"}},[t._v("待生成")]),a("a-radio-button",{attrs:{value:"waiting"}},[t._v("已生成")])],1),a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},attrs:{placeholder:"输入小说名"},on:{search:t.pageSize}},[a("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[t._v(" 搜索 ")])],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:function(e){return t.$refs.taskForm.add()}}},[t._v("添加生成任务")])],1),a("a-list",{attrs:{dataSource:t.datas,loading:t.loading,itemLayout:"vertical",size:"large",pagination:{onChange:function(e,a){return t.pageChange(e,a)},onShowSizeChange:function(e,a){return t.pageSizeChange(e,a)},pageSizeOptions:t.pageSizeOptions,showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!0,pageSize:t.pageSize,total:t.total,current:t.current}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-list-item-meta",[a("a-badge",{attrs:{slot:"avatar",count:t._f("statusFilter")(e.status),numberStyle:t._f("statusStyleFilter")(e.status)},slot:"avatar"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.catagoryname)+" | "),a("b",[t._v(t._s(e.novelname)+" ")]),t._v(" | "+t._s(e.lenth)+"字")]),a("div",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(e.starttext)+" | "+t._s(e.resultdigest))])],1),a("div",{staticClass:"list-content",attrs:{slot:"extra"},slot:"extra"},[a("div",{staticClass:"list-content-item"},[a("a-badge",{attrs:{status:t._f("statusTypeFilter")(e.status),text:t._f("statusFilter")(e.status)}}),a("p",[t._v(t._s(e.startAt))])],1)]),"2"==e.status?a("div",{attrs:{slot:"actions"},slot:"actions"},[a("a",{staticStyle:{"margin-right":"100px"},on:{click:function(a){return t.handleDetail(e.recordid)}}},[t._v(" 查看详情 ")])]):t._e()],1)}}])}),a("task-form",{ref:"taskForm",on:{commit:t.commitGenRequest}}),a("detail-view",{ref:"detailview"})],1)],1)},s=[],i=(a("d3b7"),a("5530")),o=a("81d1"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:640,visible:t.visible,title:"任务添加"},on:{ok:t.handleSubmit,cancel:function(e){t.visible=!1}}},[a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"小说模版",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tempid",{rules:[{required:!0,message:"请选择小说模版"}]}],expression:"['tempid', {rules:[{required: true, message: '请选择小说模版'}]}]"}],on:{focus:t.handleTemplateFocus}},t._l(t.templates,(function(e){return a("a-select-option",{key:e.tempid},[t._v(t._s(e.novelname))])})),1)],1),a("a-form-item",{attrs:{label:"模型选择",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["catagoryid",{rules:[{required:!0,message:"请选择小说模型"}]}],expression:"['catagoryid', {rules:[{required: true, message: '请选择小说模型'}]}]"}],on:{focus:t.handleCatagoryFocus}},t._l(t.catagories,(function(e){return a("a-select-option",{key:e.catagoryid},[t._v(t._s(e.catagoryname))])})),1)],1),a("a-form-item",{attrs:{label:"开头（词或句）",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["starttext",{rules:[{required:!1,message:"请输入开头（任意一个词或一句话）"}]}],expression:"['starttext', {rules:[{required: false, message: '请输入开头（任意一个词或一句话）'}]}]"}],staticStyle:{width:"100%"}})],1),a("a-form-item",{attrs:{label:"长度",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["lenth",{rules:[{required:!0,message:"请输入生成长度"}]}],expression:"['lenth', {rules:[{required: true, message: '请输入生成长度'}]}]"}],staticStyle:{width:"100%"},attrs:{min:100,max:3e3,precision:0,step:100}})],1),a("a-form-item",{attrs:{label:"任务备注",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}]})],1)],1)],1)},l=[],c=a("4360"),u={name:"TaskForm",data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,templates:[],catagories:[],form:this.$form.createForm(this)}},methods:{add:function(){this.visible=!0},edit:function(t){var e=this.form.setFieldsValue;this.visible=!0,this.$nextTick((function(){e({taskName:"test"})}))},handleSubmit:function(){var t=this,e=this.form.validateFields;this.visible=!0,e((function(e,a){e||(t.$emit("commit",a),t.visible=!1,t.form=t.$form.createForm(t))}))},handleTemplateFocus:function(){var t=this;this.$store.getters.template.length<=0?c["a"].dispatch("GetTemplates").then((function(e){t.templates=e})):this.templates=this.$store.getters.template},handleCatagoryFocus:function(){var t=this;this.$store.getters.catagory.length<=0?c["a"].dispatch("GetCatagories").then((function(e){t.catagories=e})):this.catagories=this.$store.getters.catagory}}},d=u,p=a("2877"),m=Object(p["a"])(d,n,l,!1,null,null,null),g=m.exports,h=a("2036"),f=a("5880"),v=a("b311"),b=a.n(v),C={0:{status:"default",text:"关闭",numberStyle:{backgroundColor:"#f50"}},1:{status:"processing",text:"生成中",numberStyle:{backgroundColor:"#2db7f5"}},2:{status:"success",text:"已完成",numberStyle:{backgroundColor:"#52c41a"}}},w={name:"GenRecord",components:{HeadInfo:o["a"],TaskForm:g,DetailView:h["a"]},data:function(){return{status:"all",loading:!1,statusMap:C,pageSizeOptions:["5","10","15","20","30"],current:1,pageSize:5,datas:[],total:0}},computed:{},created:function(){this.pageChange(1,this.pageSize)},methods:Object(i["a"])({},Object(f["mapActions"])(["AddGenRecord","GetRecordDetail","GetPageRecords"]),{commitGenRequest:function(t){var e=this,a=this.AddGenRecord;this.loading=!0,t.pageSize=this.pageSize,a(t).then((function(t){e.datas=t,e.current=1,e.total=e.total+1})).catch((function(){})).finally(this.loading=!1)},handleDetail:function(t){this.$refs.detailview.load(t)},copy:function(t){for(var e,a=this,r=this.GetRecordDetail,s=function(s){if(a.$store.getters.genrecord[s].recordid===t)return void 0===a.$store.getters.genrecord[s].resultdetail?r(t).then((function(t){e=new b.a(".copy-button",{text:t.content})})).catch((function(t){return a.requestFailed(t)})):e=new b.a(".copy-button",{text:function(){return a.$store.getters.genrecord[s].resultdetail}}),"break"},i=0;i<this.$store.getters.genrecord.length;i++){var o=s(i);if("break"===o)break}e.on("success",(function(t){alert("复制成功"),e.destroy()})),e.on("error",(function(t){alert(t.action),alert(t.trigger),e.destroy()})),e.onClick(".copy-button")},pageChange:function(t,e){var a=this,r=this.GetPageRecords;this.loading=!0,r({page:t,pageSize:e}).then((function(e){a.datas=e.data,a.current=t,a.total=e.dataCount})).catch((function(t){return alert(t)})).finally((function(){a.loading=!1}))},pageSizeChange:function(t,e){this.pageSize=e,this.pageChange(t,e)}}),filters:{statusFilter:function(t){return C[t].text},statusTypeFilter:function(t){return C[t].status},statusStyleFilter:function(t){return C[t].numberStyle}},watch:{}},y=w,S=(a("8e7d"),Object(p["a"])(y,r,s,!1,null,"ee7bcf7c",null));e["default"]=S.exports},"8e7d":function(t,e,a){"use strict";var r=a("0ea3"),s=a.n(r);s.a}}]);